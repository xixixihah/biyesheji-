<!--index.wxml-->
<navigation-bar title="Weixin" back="{{false}}" color="black" background="#FFF"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <!-- 搜索栏 -->
    <view class="search-box">
      <input class="search-input" placeholder="请输入地址或地标" bindinput="onSearchInput" />
      <button class="search-button" 
              hover-class="button-hover"
              bindtap="searchLocation">
        搜索
      </button>
    </view>

    <!-- 分类标签 -->
    <view class="category-tabs">
      <view class="tab {{activeTab === 'all' ? 'active' : ''}}" bindtap="switchTab" data-type="all">全部</view>
      <view class="tab {{activeTab === 'charging' ? 'active' : ''}}" bindtap="switchTab" data-type="charging">充电桩</view>
      <view class="tab {{activeTab === 'swap' ? 'active' : ''}}" bindtap="switchTab" data-type="swap">换电柜</view>
      <view class="tab {{activeTab === 'cabinet' ? 'active' : ''}}" bindtap="switchTab" data-type="cabinet">充电柜</view>
    </view>

    <!-- 地图组件 -->
    <map
      id="myMap"
      class="map"
      latitude="{{latitude}}"
      longitude="{{longitude}}"
      markers="{{markers}}"
      show-location="true"
      bindmarkertap="onMarkerTap">
    </map>

    <view wx:if="{{selectedMarker}}" class="marker-info">
      <text>{{selectedMarker.name}}</text>
      <button bindtap="toggleFavorite">
        {{selectedMarker.isFavorite ? '取消收藏' : '收藏'}}
      </button>
    </view>
  </view>
</scroll-view>
